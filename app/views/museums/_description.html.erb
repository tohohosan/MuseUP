<div class="text-lg my-8">
    <div class="font-bold mt-6">カテゴリ</div>
    <div class="flex flex-wrap gap-4">
        <% @museum.categories.each do |category| %>
            <div class="badge badge-primary">
                <%= category.name %>
            </div>
        <% end %>
    </div>
</div>

<div class="text-lg my-8">
    <div class="font-bold mb-2">説明</div>
    <%= @museum.description %>
</div>

<div class="text-lg my-8">
    <div class="font-bold mb-2">公式サイト</div>
    <% safe_url = sanitize(@museum.url) if @museum.url.present? && @museum.url =~ /\Ahttps?:\/\/[\S]+\z/ %>
    <% if safe_url %>
        <%= link_to safe_url, safe_url, class: "underline text-blue-500 hover:text-blue-700", target: "_blank", rel: "noopener" %>
    <% else %>
        <p class="text-red-500">有効なURLがありません</p>
    <% end %>
</div>

<div class="text-lg my-8">
    <div class="font-bold mb-2">アクセス</div>
    <%= @museum.address %>

    <!-- Google Map の表示エリア -->
    <div id="map" class="w-full h-64 my-4"></div>
    <!-- ミュージアムデータを渡すための要素 -->
    <div id="museum-data" data-museum='<%= { id: @museum.id, name: @museum.name, latitude: @museum.latitude, longitude: @museum.longitude }.to_json %>' style="display: none;"></div>
</div>

<div class="text-lg my-6">
    <div class="font-bold mb-4">投稿したユーザー</div>
    <div class="flex items-center">
        <% if @museum.user.image&.attached? %>
            <div class="rounded-full">
                <%= image_tag @museum.user.image, class: 'w-10 h-10 rounded-full mr-2 mb-4' %>
            </div>
        <% else %>
            <div class="w-10 h-10 rounded-full bg-gray-300 mr-2 mb-4"></div>
        <% end %>
        <span><%= @museum.user.name %></span>
    </div>
</div>

<% if current_user == @museum.user %>
    <div class="my-4">
        <%= link_to '編集', edit_museum_path(@museum), class: "btn btn-primary w-full" %>
    </div>
<% end %>

<%= javascript_include_tag 'museum_map', type: 'module', defer: true %> <!-- museum_map.jsを読み込み -->
<script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['GOOGLE_API_KEY'] %>&libraries=places&callback=initMap" async defer></script>