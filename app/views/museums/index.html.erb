<div class="flex justify-center my-4">
  <button class="btn btn-primary w-1/2" onclick="searchModal.showModal()">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
      <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
    </svg>
    詳しく検索する
  </button>
</div>

<div class="flex justify-center items-center mt-6 mb-6">
  <div class="stats shadow">
    <div class="stat place-items-center">
      <div class="stat-title">全体で投稿されたミュージアムの数</div>
      <div class="stat-value"><%= @total_museum_count %></div>
    </div>

    <div class="stat place-items-center">
      <div class="stat-title">あなたが投稿したミュージアムの数</div>
        <% if user_signed_in? %>
          <div class="stat-value"><%= @user_museum_count %></div>
        <% else %>
          <div class="stat-value">0</div>
        <% end %>
    </div>
  </div>
</div>

<div id="map" style="height: 650px;"></div>

<!-- JSON データを埋め込む -->
<script type="application/json" id="museum-data">
  <%= raw @museums.to_json(only: [:id, :name, :latitude, :longitude]) %>
</script>

<dialog id="searchModal" class="modal">
  <div class="modal-box">
    <h3 class="text-lg font-bold">検索</h3>

    <%= render 'shared/search_form' %>

    <div class="modal-action">
      <button class="btn" onclick="searchModal.close()">閉じる</button>
    </div>
  </div>
</dialog>

<dialog id="museumDetailModal" class="modal">
  <div class="modal-box">
    <h3 id="museumTitle" class="text-lg font-bold">ミュージアム詳細</h3>

    <div id="museumOverview">
      <%= render 'museums/overview' %>
    </div>

    <div class="modal-action">
      <button class="btn" onclick="document.getElementById('museumDetailModal').close()">閉じる</button>
      <a id="museumDetailLink" class="btn" href="#" target="_blank">詳細</a>
    </div>
  </div>
</dialog>

<script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['GOOGLE_API_KEY'] %>&libraries=places&callback=initMap" async defer></script>
